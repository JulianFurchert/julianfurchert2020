import React, {useEffect, useState} from 'react';
import {useSpring, animated} from 'react-spring';
import {Slider } from '../../../components/ProcessBar';
import Showcase from '../../../components/Showcase';
import Mockup from '../../../components/Mockup';
import useInterval from '../../../hooks/useInterval';

import Artboard from './Artboard';
import SettingsZoom from './settings-zoom.svg';

const SVG_POINTS = {
    letterPartA: "880.5999999999999,799.4800000000005,880.5999999999999,799.4800000000005,880.5999999999999,799.4800000000005,880.5999999999999,799.4800000000005,880.5999999999999,799.4800000000005,880.5999999999999,799.4800000000005,880.5999999999999,634.5999999999995,880.5999999999999,634.5999999999995,880.5999999999999,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,715.7199999999998,469.7199999999998,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,326.9800000000005,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,633.2800000000002,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,162.0999999999999,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,468.4000000000001,326.9800000000005,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,469.7199999999998,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,221.07999999999993,634.5999999999995,221.07999999999993,634.5999999999995,221.07999999999993,634.5999999999995,221.07999999999993,799.4800000000005,221.07999999999993,799.4800000000005,221.07999999999993,799.4800000000005,221.07999999999993,799.4800000000005,221.07999999999993,799.4800000000005,221.07999999999993,799.4800000000005,221.07999999999993,799.4800000000005",
    letterPartB: "385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,385.96000000000004,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,550.8400000000001,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995,715.7199999999998,634.5999999999995",
}

const weightValues = [20, 70, 100];

const SettingsWeight = () => {
  const [inView, setInView] = useState(0);
  const [index, setIndex] = useState(0);
  const [weight, setWeight] = useSpring(()=>({
    from: { strokeWidth: weightValues[index] }
  }))

  useEffect(() => {
    setWeight({ strokeWidth: weightValues[index] })
  },[index])

  useInterval(() => {
    setIndex((index + 1) % 3);
  }, 3000);

  return(
    <Showcase
      width={0.5}
      onInView={()=>setInView(true)}
      // bg="#232324"
      footer={
        <Slider
          width={30}
          percent={ weight.strokeWidth.interpolate({range: [10,140], output: [0,100]}) }
          caption="Weight "
        />
      }
    >
      <Mockup
        loaded={inView}
        width={0.8}
        ratio={0.9}
        // bg="#232324"
      >
        <Artboard
          letter={
            <>
              <animated.polyline style={weight} points={SVG_POINTS.letterPartA} />
              <animated.polyline style={weight} points={SVG_POINTS.letterPartB} />
            </>
          }
          grid={
            <g transform="matrix(18,0,0,18,-2750,-3500)">
              <SettingsZoom />
            </g>
          }
        />
      </Mockup>
    </Showcase>
  )
}

export default SettingsWeight;